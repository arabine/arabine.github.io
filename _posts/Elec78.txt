(((Magazine: PC Team 78)))
(((Rubrique : Team Pratik)))
(((Sous Rubrique : électronique)))

(((titre))) TeamBot (6) – Les capteurs

(((chapo)))
Après avoir donné des jambes à notre robot, nous allons lui apporter la faculté de voir et d'appréhender son environnement à l'aide de quelques capteurs.  TeamBot sera ainsi capable de suivre une ligne blanche tracée sur le sol.

(((texte)))
 Notre robot peut d'ors et déjà avancer, tourner et reculer mais il ne possède aucun sens pour se diriger dans l'espace. Les êtres vivants possèdent plusieurs sens dédiés à cet effet et comme nous allons le voir la robotique n'est qu'une vulgaire tentative de copier le monde biologique. Cependant, l'homme est quand même un bien beau modèle et il n'est pas complètement idiot de vouloir imiter son comportement. Si l'aspect cognitif de la robotique vous passionne, vous trouverez de très bons livres à ce sujet écrits par d'éminents psychologues. Nous n'avons pas la prétention d'aller si loin et ce que nous verrons restera très simple mais néanmoins efficace. Depuis le début de cette série d'articles, nous avons choisi de déléguer certaines tâches à des sous-ensembles autonomes. La conception d'un robot peut difficilement se réaliser par un seul "cerveau" ou alors au détriment de la souplesse de développement et du coût bien sûr. N'oublions pas le vieil adage "partager pour mieux régner" qui prendra ici tout son sens. Nous l'avons déjà vu le mois dernier avec la carte moteur : un processeur était à lui seul réservé à cet effet. L'avantage est certain : une fois cette partie du robot développée, plus besoin de s'en occuper et on peut s'attaquer à la mise au point des autres éléments du robot. Le processeur central est également déchargé de ces tâches annexes (gestion des moteurs, asservissement, capteurs…) et peut se concentrer pleinement sur sa tache : la stratégie. Dans le cadre des concours de robotique, il peut être pratique (voire indispensable) de rendre la partie "stratégie" facilement modifiable au moyen de cartes externes ou de mémoires par exemple. Mais n'allons pas trop vite dans notre tâche et attaquons-nous sans plus tarder au sujet qui nou intéresse ce mois-ci.

(((inter))) Les capteurs de contact
Nous illustrons ici le sens du "toucher". L'idée est de barder le robot de capteur de contacts tout autour de lui. Dès qu'il touchera un obstacle le capteur activé enverra son information au système de gestion. En règle générale, deux états suffisent : (1) pas d'obstacle et (2) obstacle détecté. Charge à l'intelligence artificielle de réagir en conséquence. Dans la majorité des cas cela se matérialisera par faire bouger le robot dans le sens opposé à la position de l'obstacle. Bien sûr, le nombre de capteurs que vous pourrez placer sur votre robot sera étroitement lié à la taille et à la rapidité de votre processeur. Une astuce consiste à sérialiser les capteurs à l'aide de registres à décalages tel que le 74HC165. Il existe des systèmes encore plus complexes qui sont appels à des bus de terrains, mais dans ce cas le temps de développement est largement supérieur. De façon générale, les solutions les plus simples se verront plus fiables, surtout lors des concours de robotique.  Il existe différents types de capteur de contact. Les plus utilisés et sûrement les plus pratiques sont les microrupteurs. Ils se présentent sous la forme de petits boîtiers à souder sur circuit imprimé et dotés d'une languette de déclenchement plus ou moins longue. Ces capteurs sont assez sensibles et au moindre appui sur la languette le capteur se déclenche, en jouant le rôle d'interrupteur. L'illustration ci-contre vous donne un exemple de microrupteurs. Un robot bardé de tels capteurs sur toute sa circonférence peut devenir très efficace. Bien sûr, les capteurs agissent en tout ou rien et ne font qu'envoyer l'information au processeur central. Celui-ci devra examiner l'état des capteurs par périodes bien définies : il faut donc mettre au point un programme temps réel efficace. Pour améliorer le système il est possible de brancher certains capteurs importants sur les entrées d'interruption du processeur, comme celui placé sur la face avant du robot. Cela provoquera une interruption logicielle et le robot réagira plus rapidement.

(((inter))) Les capteurs infrarouges
Le problème des capteurs sensitifs comme les microrupteurs est de détecter les obstacles lorsque ceux ci entrent en contact avec le robot. Cela est bien sûr nécessaire pour réagir en cas d'événements imprévus mais il est impossible d'anticiper les obstacles. Entrent alors en jeux les capteurs de détection à distance. Leur mise en œuvre est malheureusement un peu plus difficile. La fabrication en elle-même est aisée mais la mise au point de tels capteurs en est tout autre. En effet, l'infrarouge est quelque peu capricieux et le résultat peut rapidement devenir très aléatoire si les essais n'ont pas été rigoureux. Le principe est simple : une diode infrarouge envoie un signal vers l'avant du robot par exemple. Lorsqu'un obstacle se présente devant cette diode, le rayon infrarouge est réfléchi et revient vers le robot. Il suffit donc d'avoir un récepteur infrarouge pour récupérer ce signal. Le schéma ci-contre montre un exemple de l'ensemble émetteur/récepteur. Le montage fait appel à un oscillateur bien connu : le NE555 afin d'améliorer la détection. Avec les valeurs des condensateurs et des résistances du schéma, celui-ci fournit un signal carré à une fréquence de 40KHz. sur la broche 3. Notre émetteur est maintenant "codé" et seule cette fréquence devra être détectée. Le récepteur infrarouge est lui aussi un composant connu dans cette rubrique : le TSOP1736. Nous l'avons utilisé l'année dernière lors de la conception d'une télécommande pour Winamp. Rappelons que la fréquence centrale de capteur est 36KHz, il faut donc ajuster légèrement la valeur des composants pour que cela fonctionne. D'ailleurs, le potentiomètre R2 peut être utilisé à cet effet, bien qu'il agisse surtout sur le rapport cyclique du signal. Le TSOP fournira un niveau bas lorsqu'il aura détecté une émission infrarouge dans sa direction. Vous pourrez le vérifier à l'aide d'une télécommande classique par exemple. Et, si vous possédez un oscilloscope, vous pourrez y voir la trame (le numéro du bouton) envoyée par la télécommande.

(((inter))) Le suivi de ligne
Le principe de suivi de ligne obéit au lois : un signal infrarouge est envoyé sur le sol et est récupéré par un transistor également infrarouge. Seulement, le signal n'est pas "tout ou rien" (détecté/pas détecté) mais analogique. L'amplitude du voltage de sortie sera en fonction de la couleur du sol. Chaque couleur et matière possède des propriétés de réflexion différente. Dans le cas d'un suivi de ligne blanche sur du vert il suffit de trois capteurs identiques pour commencer à diriger convenablement le robot. Il suffit de placer les trois capteurs en ligne, espacés en fonction de la largeur de la ligne blanche. Le reste est l'affaire de l'intelligence artificielle. Procédons maintenant à un petit test. Nous allons utiliser le capteur de réflexion HOA0149 de Honeywell, constructeur fameux pour ses produits optiques. Nous câblons ce capteur comme sur le schéma ci-contre, avec une LED pour visualiser le comportement du capteur. La diode infrarouge est constamment alimentée. Alimenter puis placer un objet devant le capteur et la LED doit s'allumer. Remarquons que l'intensité de la LED varie en fonction de la matière réflective. Pour différencier une couleur d'une autre, il suffit de faire suivre le capteur par un comparateur analogique, avec un amplificateur opérationnel par exemple. Le reste n'est que réglages minutieux. Notons enfin deux gros désavantages à ces capteurs : leur focale est très courte (quelques millimètres seulement) et leur faible immunité à la lumière ambiante. Le seul remède est de placer les capteurs dans le noir le plus complet.

(((inter))) Conclusion
D'autres méthodes de détection peuvent être employées, avec leurs lots de contraintes. Il existe par exemple des capteurs laser ou ultrasoniques. Enfin, n'oublions pas les caméras numériques, très efficaces mais  nécessitant des algorithmes de traitement d'image très poussés. La rubrique électronique va faire une petite pause de trois mois, laissant la place à une série de trois reportages sur la robotique. Nous allons rencontrer un club robotique participant au concours E=M6 et nous parlerons de leur organisation, leurs choix technologiques, leur budget et tout ce qui tourne autour. D'ici là, nous vous donnons rendez-vous à la rentrée pour apporter la touche finale à notre robot : l'assemblage et les tests !

(((signature)))
Anthony Rabine - arabine@programmationworld.com

(((images)))
elec1.tif : Le timer NE555 fournit les 40KHz requis.
elec2.tif : Quelques microrupteurs de différents types.
elec3.tif : Un montage simple pour tester le principe du capteur de réflexion.
elec4.tif : Le HOA0149 est un capteur de réflexion bon marché.
elec5.tif : L'arène de combat de la coupe de robotique, édition 2002.
elec6.tif : Le prochain concours E=M6 fera énormément appel au capteurs de réflexion !
